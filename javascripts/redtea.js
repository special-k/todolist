/*
This is RedTea v0.3 - js library

TERMS OF USE RedTea

RedTea is licensed under a commercial and CC BY-SA-NC licenses.

I want to make sure that you are fully aware of
the license types of RedTea and which is the correct one to
use based on your development project. 
It is important that you are in the know of the requirements of developing under CC BY-SA-NC.
Learn about the CC BY-SA-NC requirements here http://creativecommons.org/licenses/by-nc-sa/3.0/deed.ru

Questions about the RedTea commercial license?
I recommend contact with me special-k@li.com for more information on the RedTea commercial license, 
what it enables and how you can start developing with it.

Copyright Â© 2012-2015 Kirill Jakovlev
 */
(function(){var t,e,n,i,r,s,o,u,a,h,l,c,p,d,f,g,m,y,_,T,b,v,C,R,E,w,O,A,N,x,M,S,H,L,k,D,W,I,B,U,F,P,G,K,Y,j,q,X,V,z,Z,J=function(t,e){function n(){this.constructor=t}for(var i in e)Q.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},Q={}.hasOwnProperty,$=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};for(window.glob=window,glob.root=glob.document,root.create=root.createElement,root.one=root.getElementById,root.byName=root.getElementsByName,glob.RedTea={},glob.RT=RedTea,RedTea.rtid=0,RedTea.genid=function(){return this.rtid+=1},a=function(){function t(){}return t}(),h||(h=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return J(e,t),e}(a)),u||(u=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return J(e,t),e}(a)),"undefined"!=typeof MozWebSocket&&(glob.WebSocket=MozWebSocket),"undefined"==typeof HTMLDocument&&(glob.HTMLDocument=Document),"Microsoft Internet Explorer"===navigator.appName&&Object.defineProperty(Function.prototype,"name",{get:function(){var t;return t=this.toString().match(/^function\s*([^\s(]+)/)[1],Object.defineProperty(this,"name",{enumerable:!1,value:t}),t},enumerable:!1,configurable:!0}),n=function(t){return t.isWidget?n(t.dom):t},t="all",glob.RTC={ON_CLASS:"on",ON:"on",FUNCTION_TYPE:"function",STRING_TYPE:"string",UNDEFINED_TYPE:"undefined",READYSTATECHANGE:"readystatechange",CLICK:"click",DBLCLICK:"dblclick",MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",MOUSEMOVE:"mousemove",TOUCHSTART:"touchstart",TOUCHEND:"touchend",TOUCHMOVE:"touchmove",DRAGSTART:"dragstart",DRAGOVER:"dragover",KEYDOWN:"keydown",DBLCLICK:"dblclick",CHANGE:"change",KEYPRESS:"keypress",KEYUP:"keyup",FOCUS:"focus",PROGRESS:"progress",MOUSEWHEEL:"mousewheel",HASHCHANGE:"hashchange",BEFOREUNLOAD:"beforeunload",MOUSELEAVE:"mouseleave",ORIENTATIONCHANGE:"orientationchange",RESIZE:"resize",GET:"get",POST:"post",PUT:"put",DELETE:"delete",TEXTNODENAME:"#text",BR:"BR",CLASS:"class",C2D:"2d",EMPTY_HREF:"#",BLANK_TARGET:"_blank",ONREADYSTATECHANGE:"readystatechange",ONCLICK:"click",ONMOUSEDOWN:"mousedown",ONMOUSEUP:"mouseup",ONMOUSEMOVE:"mousemove",ONTOUCHSTART:"touchstart",ONTOUCHEND:"touchend",ONTOUCHMOVE:"touchmove",ONDRAGSTART:"dragstart",ONKEYDOWN:"keydown",ONDBLCLICK:"dblclick",ONCHANGE:"change",ONKEYPRESS:"keypress",ONKEYUP:"keyup",ONFOCUS:"focus"},e="function",s="object",o="string",i="mousedown",r="mouseup",RT.FUNCTION_TYPE="function",RT.ONREADYSTATECHANGE="readystatechange",RT.ONCLICK="click",RT.ONMOUSEDOWN="mousedown",RT.ONMOUSEUP="mouseup",RT.ONTOUCHSTART="touchstart",RT.ONDRAGSTART="dragstart",RT.GET="get",RT.POST="post",RT.TEXT_NODE_NAME="#text",RT.EMPTY_HREF="#",RT.EMPTY_HREF_ATTR="#",RedTea.moduleKeywords=["extended","included"],RedTea.Base=function(){function t(){}return t.extend=function(t){var e,n,i,r;t.classes||(t.classes=[]),t.classes.push(this),this["extends"]||(this["extends"]=[]),this["extends"].push(t),n=t.prototype;for(e in n)r=n[e],$.call(RedTea.moduleKeywords,e)<0&&null==this[e]&&(this[e]=r);return null!=(i=t.prototype.extended)&&i.call(this),this},t.include=function(t){var e,n,i,r;t.classes||(t.classes=[]),t.classes.push(this),this.includes||(this.includes=[]),this.includes.push(t),n=t.prototype;for(e in n)r=n[e],$.call(RedTea.moduleKeywords,e)<0&&null==this.prototype[e]&&(this.prototype[e]=r);return null!=(i=t.prototype.included)&&i.call(this),this},t.prototype.bime=function(t,e,n){return t.bi(e,n,{context:this})},t}(),RT.Anticipant=function(){function t(){this._rtid=RT.genid()}return t.prototype.isItTime=!1,t.prototype.isRemoving=!1,t.prototype.priority=0,t.prototype.binded=function(t,e,n,i){},t.prototype.fire=function(t,e,n){},t}(),RT.DoOnce={isItTime:!0,isRemoving:!0,priority:0,_rtid:RT.genid(),constructor:function(){},binded:function(){},fire:function(){}},RT.CountAnticipant=function(t){function e(t){this.maxCount=t,this.count=0,this.events={},e.__super__.constructor.apply(this,arguments)}return J(e,t),e.prototype.isItTime=!0,e.prototype.binded=function(t,e,n,i){return this.event=e},e.prototype.fire=function(t,e,n){return e===this.event&&(this.count+=1),this.count>=this.maxCount?this.isRemoving=!0:void 0},e}(RT.Anticipant),RT.SimpleSyncAnticipant=function(t){function e(){this.events=[],this.eventsChecks={},e.__super__.constructor.apply(this,arguments)}return J(e,t),e.prototype.binded=function(t,e,n,i){return this.events.push(e)},e.prototype.fire=function(t,e,n){return this.isItTime&&(this.eventsChecks={},this.isItTime=!1),this.eventsChecks[e]=!0,this.events.every(function(t){return function(e){return t.eventsChecks[e]}}(this))?this.isItTime=!0:void 0},e}(RT.Anticipant),RT.PeriodSyncAnticipant=function(t){function e(t){this.period=t,this.events=[],this.eventsChecks={},e.__super__.constructor.apply(this,arguments)}return J(e,t),e.prototype.binded=function(t,e,n,i){return this.events.push(e)},e.prototype.fire=function(t,e){var n,i;return this.isItTime&&(this.eventsChecks={},this.isItTime=!1),i=(new Date).getTime(),n=this.period,this.eventsChecks[e]=i,this.events.every(function(t){return function(e){return null!=t.eventsChecks[e]&&i-t.eventsChecks[e]<n}}(this))?this.isItTime=!0:void 0},e}(RT.Anticipant),RT.OnceInPeriodAnticipant=function(t){function e(t){this.period=t,e.__super__.constructor.apply(this,arguments)}return J(e,t),e.prototype.binded=function(t,e,n,i){},e.prototype.fire=function(t,e){return null==this.lastFireTime||(new Date).getTime()-this.lastFireTime>this.period?(this.lastFireTime=(new Date).getTime(),this.isItTime=!0):this.isItTime=!1},e}(RT.Anticipant),RT.Observer=function(){function t(t,e){this.owner=null!=t?t:{},this.callbacks=e,this.__listenersHash={},this.contexts={},this.funcs={},this.anticipants={},this.__contextsUsingCounts={},this.__funcsUsingCounts={},this.__eventsUsingCounts={},this.__cachedListeners={},this.__cachedListeners={},this.__cachedAnticipants=null,null!=this.callbacks&&(this.callbacksContext=null!=this.callbacks.context?this.callbacks.context:this.owner)}return t.prototype._cacheListeners=function(t){var e,n,i,r,s,o,u,a;if(i=this.__cachedListeners[t],null==i){i=[],this.__cachedListeners[t]=i,a=this.__listenersHash[t];for(o in a){s=a[o];for(r in s){n=s[r];for(e in n)u=n[e],i.push([this.funcs[o],this.contexts[r],u])}}i.sort(function(t,e){return t[2].priority-e[2].priority})}return i},t.prototype._cacheAnticipants=function(){var t;return t=this.__cachedAnticipants,null==t&&(t=Object.values(this.anticipants),this.__cachedAnticipants=t,t.sort(function(t,e){return t.priority-e.priority})),t},t.prototype.fire=function(t){var n,i,r,s,o,u,a,h,l,c,p,d,f,g,m,y;if(null!=this.__listenersHash[t]&&this.__eventsUsingCounts[t]>0){for(o=this._cacheListeners(t),s=this._cacheAnticipants(),a=0,c=s.length;c>a;a++)i=s[a],i.fire(this,t,arguments);for(l=0,p=o.length;p>l;l++){if(d=o[l],g=d[0],f=d[1],m=d[2],y=m.through,null!=y?(h=y.isItTime,n=y._rtid):n=y,null==y||h)switch(m.callCount+=1,u={event:t,owner:this.owner},arguments.length){case 1:typeof g===e?g.call(f,u):f[g](u);break;case 2:typeof g===e?g.call(f,u,arguments[1]):f[g](u,arguments[1]);break;case 3:typeof g===e?g.call(f,u,arguments[1],arguments[2]):f[g](u,arguments[1],arguments[2]);break;case 4:typeof g===e?g.call(f,u,arguments[1],arguments[2],arguments[3]):f[g](u,arguments[1],arguments[2],arguments[3]);break;default:r=Array.prototype.slice.call(arguments),r[0]=u,typeof g===e?g.apply(f,r):f[g].apply(f,r)}null!=y&&y.isRemoving&&(typeof g===e?this.unbiById(t,g._rtid,f._rtid,n):this.unbiById(t,g,f._rtid,n))}}return this.owner||this},t.prototype._upFire=function(t,n){var i,r,s,o,u,a,h,l,c,p,d,f,g,m,y,_;if(null!=this.__listenersHash[t]&&this.__eventsUsingCounts[t]>0){for(u=this._cacheListeners(t),o=this._cacheAnticipants(),h=0,p=o.length;p>h;h++)r=o[h],r.fire(this,t,arguments);for(c=0,d=u.length;d>c;c++){if(f=u[c],m=f[0],g=f[1],y=f[2],_=y.through,null!=_?(l=_.isItTime,i=_._rtid):i=_,null==_||l)switch(y.callCount+=1,a={event:t,owner:this.owner,firedFrom:n},y.throughParams&&(a.throughParams=y.throughParams),arguments.length){case 1:typeof m===e?m.call(g,a):g[m](a);break;case 2:typeof m===e?m.call(g,a,arguments[2]):g[m](a,arguments[2]);break;case 3:typeof m===e?m.call(g,a,arguments[2],arguments[3]):g[m](a,arguments[2],arguments[3]);break;case 4:typeof m===e?m.call(g,a,arguments[2],arguments[3],arguments[4]):g[m](a,arguments[2],arguments[3],arguments[4]);break;default:s=Array.prototype.slice.call(arguments),s.shift(),s[0]=a,typeof m===e?m.apply(g,s):g[m].apply(g,s)}null!=_&&_.isRemoving&&(typeof m===e?this.unbiById(t,m._rtid,g._rtid,i):this.unbiById(t,m,g._rtid,i))}}return this.owner||this},t.prototype.bi=function(t,n,i){var r,o,u,a,h,l,c;if(null==n)throw"empty function for "+t+" bind";if(l=i||{},u=l.context||this.owner,null==this.__listenersHash[t]&&(this.__listenersHash[t]={},this.__eventsUsingCounts[t]=0),typeof n===e)h=n._rtid,null==h&&(h=RedTea.genid(),n._rtid=h);else if(h=n,null==u[h])throw"empty function for "+t+" bind";if(a=u._rtid,null==a&&(a=RT.genid(),u._rtid=a),r=l.through,o=typeof r===s?r._rtid:r,null==this.funcs[h]&&(this.funcs[h]=n,this.__funcsUsingCounts[a]=0),null==this.contexts[a]&&(this.contexts[a]=u,this.__contextsUsingCounts[a]=0),null!=r&&(null==this.anticipants[o]&&(this.anticipants[o]=r,delete this.__cachedAnticipants),r.binded(this,t,n,u)),null==this.__listenersHash[t][h]&&(this.__listenersHash[t][h]={}),null==this.__listenersHash[t][h][a]&&(this.__listenersHash[t][h][a]={}),null!=this.__listenersHash[t][h][a][o])throw new Error("listener with this parameters already added for "+t);return this.__eventsUsingCounts[t]<1&&null!=this.callbacks&&null!=this.callbacks.onAddEvent&&this.callbacks.onAddEvent.call(this.callbacksContext,t),this.__funcsUsingCounts[a]+=1,this.__contextsUsingCounts[a]+=1,this.__eventsUsingCounts[t]+=1,this.__listenersHash[t][h][a][o]=l,l.callCount||(l.callCount=0),l.priority||(l.priority=0),c=l.through,delete this.__cachedListeners[t],this.owner||this},t.prototype.unbiById=function(t,e,n,i){return null!=this.__listenersHash[t]&&null!=this.__listenersHash[t][e]&&null!=this.__listenersHash[t][e][n]&&null!=this.__listenersHash[t][e][n][i]&&(null!=this.__cachedListeners[t]&&delete this.__cachedListeners[t],this.removeAnticipants(i),delete this.__listenersHash[t][e][n][i],this.__eventsUsingCounts[t]-=1,this.__contextsUsingCounts[n]-=1,this.__contextsUsingCounts[n]<1&&delete this.contexts[n],this.__funcsUsingCounts[e]-=1,this.__funcsUsingCounts[e]<1&&delete this.funcs[e],this.__eventsUsingCounts[t]<1&&null!=this.callbacks&&null!=this.callbacks.onDeleteEvent)?this.callbacks.onDeleteEvent.call(this.callbacksContext,t):void 0},t.prototype.unbi=function(t,n,i){var r,o,u,a;return a=typeof n===e?n._rtid:n,null!=i?(r=i.through,o=typeof r===s?r._rtid:r,u=i.context):o=void 0,u||(u=this.owner),this.unbiById(t,a,u._rtid,o),this.owner||this},t.prototype.removeAnticipants=function(t){return null!=t?(delete this.anticipants[t],delete this.__cachedAnticipants):void 0},t.prototype.undo=function(t,e,n){return this.unbi(t,e,{context:n})},t.prototype["do"]=function(t,e,n,i){return i&&i.maxCount?this.bi(t,e,{context:n,through:new RT.CountAnticipant(i.maxCount)}):this.bi(t,e,{context:n})},t}(),glob.Observer=RT.Observer,RT.Observable=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return J(e,t),e.prototype.fire=function(){return null!=this.observer?this.observer.fire.apply(this.observer,arguments):void 0},e.prototype.bi=function(t,e,n){return null==this.observer&&(this.observer=new RT.Observer(this)),this.observer.bi(t,e,n)},e.prototype.unbi=function(t,e,n){return null!=this.observer?this.observer.unbi(t,e,n):void 0},e.prototype.biOnce=function(t,e,n){return null==this.observer&&(this.observer=new RT.Observer(this)),n||(n={}),n.through=RT.DoOnce,this.observer.bi(t,e,n)},e.prototype.doOnce=function(t,e,n){return this.biOnce(t,e,{context:n})},e.prototype.undo=function(t,e,n){return this.unbi(t,e,{context:n})},e.prototype["do"]=function(t,e,n,i){return i&&i.maxCount?this.bi(t,e,{context:n,through:new RT.CountAnticipant(i.maxCount)}):this.bi(t,e,{context:n})},e}(RedTea.Base),glob.Observable=RT.Observable,H=[],D=[glob,HTMLElement.prototype,u.prototype,XMLHttpRequest.prototype,h.prototype],f=0,_=D.length;_>f;f++)S=D[f],S.bi=function(t,e,n){return null==this.observer&&(this._funcs={},this.observer=new RT.Observer(this,{onAddEvent:function(t){return function(e){return t._funcs[e]=function(t){return this.observer.fire(e,t)},t.addEventListener(e,t._funcs[e])}}(this),onDeleteEvent:function(t){return function(e){return t.removeEventListener(e,t._funcs[e]),t._funcs[e]=null}}(this)})),this.observer.bi(t,e,n),this},S.on=S.bi,S.unbi=function(t,e,n){return null!=this.observer&&this.observer.unbi(t,e,n),this},S.fire=function(){return null!=this.observer?this.observer.fire.apply(this.observer,arguments):void 0},S.biOnce=function(t,e,n){return null!=this.observer&&(n||(n={}),n.through=RT.DoOnce,this.observer.bi(t,e,n)),this},S.doOnce=function(t,e,n){return this.biOnce(t,e,{context:n})},S.undo=function(t,e,n){return this.unbi(t,e,{context:n})},S["do"]=function(t,e,n,i){return i&&i.maxCount?this.bi(t,e,{context:n,through:new RT.CountAnticipant(i.maxCount)}):this.bi(t,e,{context:n})},S.upFire=function(t){var e;return e=Array.prototype.slice.call(arguments),e[0]=this,e.unshift(t),this._upFire.apply(this,e)},S._upFire=function(){return null!=this.observer&&this.observer._upFire.apply(this.observer,arguments),null!=this.widget?this.widget._upFire.apply(this.widget,arguments):void 0},S.upFireBind=function(t,e){return this.bi(t,this._upFireBindCall(e),{context:this})},S._upFireBindCall=function(t){var e,n,i;return this._throughFireBinds||(this._throughFireBinds={}),n=this._throughFireBinds[t],n||(e=arguments,i=this,n=function(){return this.upFire.apply(i,e)},this._throughFireBinds[t]=n),n};for(W=[glob,HTMLElement.prototype,u.prototype],g=0,T=W.length;T>g;g++)S=W[g],S.stopProp=function(){var t,e,n;for(e=0,n=arguments.length;n>e;e++)t=arguments[e],this.bi(t,this._stopProp);return this},S.prevDef=function(){var t,e,n;for(e=0,n=arguments.length;n>e;e++)t=arguments[e],this.bi(t,this._prevDef);return this},S.stopPropAndDef=function(){var t,e,n;for(e=0,n=arguments.length;n>e;e++)t=arguments[e],this.bi(t,this._stopPropAndDef);return this},S.notClickTimout=function(t){return this._notClickTimeout=t,this.bi(i,_notClickMouseDown,{context:this}),this.bi(r,_notClickMouseUp,{context:this})},S._notClickMouseDown=function(t,e){return this._mouseDownTime=(new Date).getTime()},S._notClickMouseUp=function(t,e){return this.notClick=(new Date).getTime()-this._mouseDownTime>this._notClickTimeout},S._stopProp=function(t,e){return e.stopPropagation()},S._prevDef=function(t,e){return e.preventDefault()},S._stopPropAndDef=function(t,e){return e.preventDefault(),e.stopPropagation()};for(RT.Stratum=function(t){function e(){this.managers={}}return J(e,t),e.prototype.addManager=function(t,e){if(null!=this.managers[t])throw"object with this name already added";return e.init(this,t),this.fire("onAddManager:"+t,e),this.fire("onAddManager",e),this.managers[t]=e},e.prototype.updateManager=function(t,e){},e.prototype.removeManager=function(t){if(null==this.managers[t.name])throw"object with this name not added";return t.destroy(),delete this.managers[name]},e.prototype.setBaseControls=function(){return this.managers.controlsGenerator.clear(),this.managers.controlsManager.clear(),this.baseControls()},e}(RT.Observable),RT.BaseManager=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return J(e,t),e.prototype.managers=[],e.prototype.init=function(t,e){return this.stratum=t,this.name=e,this.setManagers(),this.setListeners()},e.prototype.setManagers=function(){var t,e,n,i,r,s;for(r=this.managers,s=[],t=0,e=r.length;e>t;t++)i=r[t],n=this.stratum.managers[i],null!=n?this.initManager(this.stratum,n):this.stratum.bi("onAddManager:"+i,this.initManager,{context:this}),s.push(this.stratum.bi("onUpdateManager"+i,this.initManager,{context:this}));return s},e.prototype.initManager=function(t,e){var n;return this.stratum=t,this[e.name]=e,n=this[e.name+"Loaded"],null!=n&&n.call(this),this.fire(e.name+"Loaded",e)},e.prototype.setListeners=function(){},e}(RT.Observable),RT.Widget=function(t){function i(t,n){var i,r;if(this.preinit(t),null!=t?null!=t.storageItem?(this.storageItem=t.storageItem,this.storageItem.widget=this):this.storageItem=new RT.StorageItem(t.storageData,this.pass,this,t.storageKey):this.storageItem=new RT.StorageItem({},this.pass,this),this.storageInit(t),null!=this.widget&&this.widget.getCollectionField(this.collectionName).push(this.storageItem),typeof t===s){this.defaultParams=t;for(i in t)r=t[i],this[i]=r;this.createDom(this,t)}(null==t||typeof t===e)&&this.createDom(this),typeof t===e&&this.append(t),null!=n&&this.append(n),null!=this.stratum&&this.setManagers(),this.init(t)}var r,u;return J(i,t),r=function(t,n,i,r,s){var o,u;if(o=t.constructor,u=Object.create(t),u.widget=r,u.stratum=s,u.isMain?u.mainWidget=u:null!=i&&(u.mainWidget=i),null!=o)switch(n.length){case 0:o.call(u);break;case 1:typeof n[0]===e?(o.call(u),u.append(n[0])):o.call(u,n[0]);break;default:o.apply(u,n)}return u},i.register=function(t){var e;if(e=this.prototype,null!=RedTea[t]||null!=RedTeaWidget.prototype[t]||null!=HTMLElement.prototype[t])throw"name '"+t+"' alrady used!";if("mainWidget"===t||"stratum"===t)throw"name '"+t+"' reserved word!";return RedTea[t]=function(){return r(e,arguments)},RT.Widget.prototype[t]=function(){var t;return t=r(e,arguments,this.mainWidget,this,this.stratum),null!=this.dom?this.dom.append(t):this.dom=t,t},RT.Stratum.prototype[t]=function(){return r(e,arguments,this.mainWidget,null,this)},HTMLElement.prototype[t]=function(){var t;return t=r(e,arguments,this.mainWidget,this.widget,this.widget&&this.widget.stratum||this.mainWidget&&this.mainWidget.stratum),this.appendChild(n(t)),t}},i.prototype.isMain=!1,i.prototype.isWidget=!0,i.prototype.collectionName="widgets",i.prototype.dom=null,i.prototype.storageItem=null,i.prototype.pass=null,i.prototype.managers=[],i.prototype.createDom=function(t){},i.prototype.preinit=function(t){},i.prototype.storageInit=function(t){},i.prototype.init=function(t){},i.prototype.getField=function(t){return this.storageItem.get(t)},i.prototype.getCollectionField=function(t){var e;return e=this.storageItem.get(t),e||(e=this.storageItem.setCollection(t,new RT.StorageCollection)),e},i.prototype.isAdded=function(){return this.dom.isAdded()},i.prototype.add=function(t,e){return this.addHelper(this,t,e)},i.prototype.append=function(t,e){return this.addHelper(this,t,e)},i.prototype.addHelper=function(t,i,r){return typeof i===e?i.call(t):n(t).append(i,r),this},i.prototype.removeSelf=function(){return this.dom.removeSelf()},i.prototype.remChilds=function(){return this.dom.remChilds()},i.prototype.hasCls=function(t){return this.dom.hasCls(t)},i.prototype.addCls=function(t){return this.dom.addCls(t),this},i.prototype.remCls=function(t){return this.dom.remCls(t),this},i.prototype.togCls=function(t){return this.dom.togCls(t),this},i.prototype.destroy=function(){return this.removeSelf(),delete this.storageItem.widget,null!=this.widget&&this.widget.getCollectionField(this.collectionName).remove(this.storageItem),delete this.storageItem,delete this.dom},i.prototype.setManagers=function(){var t,e,n,i,r,s;for(r=this.managers,s=[],t=0,e=r.length;e>t;t++)i=r[t],n=this.stratum.managers[i],null!=n?this.initManager(this.stratum,n):this.stratum.bi("onAddManager:"+i,this.initManager,{context:this}),s.push(this.stratum.bi("onUpdateManager"+i,this.initManager,{context:this}));return s},i.prototype.initManager=function(t,e){var n;return this.stratum=t,this[e.name]=e,n=this[e.name+"Loaded"],null!=n&&n.call(this),this.fire(e.name+"Loaded",e)},u=" ",i.prototype.withParamsClasses=function(t){return this.classes||(this.classes=this["class"]),this.classes||(this.classes=[]),typeof this.classes===o?(this.classes+" "+t).trim():(this.classes.join(u)+" "+t).trim()},i.prototype.sprm=function(t,e){return this[t]=e,this},i.prototype.prm=function(t){return this[t]},i.prototype.ins=function(t){return this.dom.ins(t)},i.prototype.preadd=function(t,e){return console.log("preadd is deprecated"),this.dom.preadd(t,e),this},i.prototype.replaceBy=function(t){return console.log("replaceBy is deprecated"),this.dom.replaceBy(t)},i.prototype.addAfter=function(t){return console.log("addAfter is deprecated"),this.dom.addAfter(t)},i.prototype.upFire=function(t){var e;return e=Array.prototype.slice.call(arguments),e[0]=this,e.unshift(t),this._upFire.apply(this,e)},i.prototype._upFire=function(){return null!=this.observer&&this.observer._upFire.apply(this.observer,arguments),null!=this.widget?this.widget._upFire.apply(this.widget,arguments):void 0},i.prototype.upFireBind=function(t,e){return this.bi(t,this._upFireBindCall(e),{context:this})},i.prototype._upFireBindCall=function(t){var e,n,i;return this._throughFireBinds||(this._throughFireBinds={}),n=this._throughFireBinds[t],n||(e=arguments,i=this,n=function(){return this.upFire.apply(i,e)},this._throughFireBinds[t]=n),n},i}(RT.Observable),glob.RTW=RT.Widget,glob.RedTeaWidget=RT.Widget,I=[HTMLDocument.prototype,HTMLElement.prototype,u.prototype],y=0,v=I.length;v>y;y++)m=I[y],m.tags=function(t){return this.getElementsByTagName(t)},m.tag=function(t){return this.getElementsByTagName(t)[0]},m.byClass=function(t){return this.getElementsByClassName(t)},m.firstByClass=function(t){return this.getElementsByClassName(t)[0]};for(B=[HTMLElement.prototype,u.prototype],x=0,C=B.length;C>x;x++)m=B[x],m.sprm=function(t,e){return this[t]=e,this},m.prm=function(t){return this[t]},m.atr=HTMLElement.prototype.getAttribute,m.intAtr=function(t){return parseInt(this.getAttribute(t))},m.floatAtr=function(t){return parseFloat(this.getAttribute(t))},m.satr=function(t,e){return this.setAttribute(t,e),this},m.remAtr=function(t){return this.removeAttribute(t),this},m.satrs=function(t){var e,n,i;n=[];for(e in t)i=t[e],n.push(this.setAttribute(e,i));return n},m.addCls=function(t){return this.classList.add(t),this},m.remCls=function(t){return this.classList.remove(t),this},m.hasCls=function(t){return this.classList.contains(t)},m.togCls=function(t){return this.classList.toggle(t),this},m.remove=m.removeChild,m.remChilds=function(){var t;for(t=[];this.hasChildNodes();)t.push(this.remove(this.firstChild));return t},m.sliceChildNodes=function(){return Array.prototype.slice.call(this.childNodes)},m.setWigets=function(t){return t.isWidget||t.widget||(t.widget=this.widget),null!=this.mainWidget?t.mainWidget=this.mainWidget:void 0},m.append=function(t,i){var r,s,o;return typeof t===e?t.call(this):(o=n(t),null!=i?null!=i.after?(r=n(i.after),null!=r.nextSibling?this.insertBefore(o,r.nextSibling):this.appendChild(o)):null!=i.before?this.insertBefore(o,n(i.before)):null!=i.beforeAt?(s=this.childNodes[i.beforeAt],null!=s?this.insertBefore(o,s):this.appendChild(o)):this.appendChild(o):this.appendChild(o)),this.setWigets(t),this},m.add=m.append,m.removeSelf=function(){return null!=this.parentElement?this.parentElement.remove(this):void 0},m.insert=function(t){return t.isWidget?this.appendChild(t.dom):this.appendChild(t),this.setWigets(t),t},m.ins=m.insert,m.preadd=function(t,e){return console.log("preadd is deprecated"),null!=this.firstChild?(t=t.isWidget?t.dom:t,e=null!=e?e.isWidget?e.dom:e:this.firstChild,this.insertBefore(t,e)):this.append(t),this},m.replaceBy=function(t){return console.log("replaceBy is deprecated"),t.isWidget?this.parentNode.insertBefore(t.dom,this):this.parentNode.insertBefore(t,this),this.removeSelf(),this},m.addAfter=function(t){return console.log("addAfter is deprecated"),this.parentNode.insertBefore(t,this.nextSibling)},m.addBefore=function(t){return console.log("addBefore is deprecated"),this.parentNode.insertBefore(t,this)};for(U=[HTMLDocument.prototype,HTMLElement.prototype,u.prototype,RedTeaWidget.prototype,Text.prototype],M=0,R=U.length;R>M;M++)m=U[M],m.setas=function(t,e){return null!=e?e[t]=this:this.mainWidget[t]=this,this},m.setta=m.setas;for(F=[HTMLDocument.prototype,HTMLElement.prototype,u.prototype,Text.prototype],L=0,E=F.length;E>L;L++)m=F[L],m.isAdded=function(){return null!=this.parentNode},m.isAddedToDom=function(){var t;if(null==this.parentNode)return!1;for(;t=this.parentNode;)if(this.parentNode===root)return!0;return!1};for(P=[Text.prototype],k=0,w=P.length;w>k;k++)m=P[k],m.removeSelf=function(){return null!=this.parentElement?this.parentElement.remove(this):void 0};for(X=["script","meta","link","div","p","span","a","img","br","hr","em","strong","button","table","tr","th","td","thead","tbody","tfoot","ul","ol","li","dl","dt","dd","h1","h2","h3","h4","h5","h6","h7","form","fieldset","input","textarea","label","select","option","canvas","footer","aside","section","header","pre","code","noscript","iframe"],l=function(t,n,i){var r,s;if(null!=n)if(typeof n===e)n.call(t);else for(r in n)s=n[r],r=r.split("_").join("-"),t.setAttribute(r,s);return null!=i&&i.call(t),t},c=function(t){return HTMLElement.prototype[t]=function(e,n){var i,r;return r=root.create(t),r.widget||(r.widget=this.widget),null!=this.mainWidget&&(r.mainWidget=this.mainWidget),i=l(r,e,n),this.appendChild(i),i},glob.RedTea[t]=function(e,n){return l(root.create(t),e,n)},RT.Stratum.prototype[t]=function(e,n){return l(root.create(t),e,n)},glob.RedTeaWidget.prototype[t]=function(e,n){var i,r;return r=root.create(t),r.widget||(r.widget=this),null!=this.mainWidget&&(r.mainWidget=this.mainWidget),i=l(r,e,n),null!=this.dom?this.dom.appendChild(i):this.dom=i,i}},j=0,O=X.length;O>j;j++)q=X[j],c(q);for(glob.RedTea.textNode=function(t){return root.createTextNode(t)},glob.RedTea.tn=glob.RedTea.textNode,glob.RedTeaWidget.prototype.textNode=function(t){var e;return e=root.createTextNode(t),e.widget||(e.widget=this),null!=this.mainWidget&&(e.mainWidget=this.mainWidget),null!=this.dom?this.dom.appendChild(e):this.dom=e,e},glob.RedTeaWidget.prototype.tn=glob.RedTeaWidget.prototype.textNode,G=[HTMLElement.prototype,u.prototype],V=0,A=G.length;A>V;V++)m=G[V],m.textNode=function(t){var e;return e=root.createTextNode(t),e.widget=this.widget,e.mainWidget=this.mainWidget,this.appendChild(e),e},m.tn=HTMLElement.prototype.textNode;for(K=["svg"],p=function(t){return HTMLElement.prototype[t]=function(e,n){var i;return i=root.createElementNS("http://www.w3.org/2000/svg",t),l(i,e,n),this.appendChild(i),i}},z=0,N=K.length;N>z;z++)q=K[z],p(q);for(Y=["svg","path","rect","text","tspan"],d=function(t){return u.prototype[t]=function(e,n){var i;return i=root.createElementNS("http://www.w3.org/2000/svg",t),l(i,e,n),this.appendChild(i),i},glob.RedTea[t]=function(e){return l(root.createElementNS("http://www.w3.org/2000/svg",t),p1,p2)}},Z=0,b=Y.length;b>Z;Z++)q=Y[Z],d(q);glob.isTouchDevice=-1!==Object.keys(window).indexOf("ontouchstart")||window.DocumentTouch&&document instanceof DocumentTouch,glob.isWebKit=-1!==Object.keys(document.documentElement.style).indexOf("WebkitAppearance"),glob.isFirefox=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,RT.onRequestOk=function(t){return 4===t.target.readyState&&t.target.status>=200&&t.target.status<300},RT.onRequestNotOk=function(t){return 4===t.target.readyState&&(t.target.status<200||t.target.status>=300)},RT.onRequestFinish=function(t){return 4===t.target.readyState},RT.post=function(t){var e;return e=new XMLHttpRequest,e.open(RTC.POST,t,!0),e},RT.get=function(t){var e;return e=new XMLHttpRequest,e.open(RTC.GET,t,!0),e},RT.put=function(t){var e;return e=new XMLHttpRequest,e.open(RTC.PUT,t,!0),e},RT.del=function(t){var e;return e=new XMLHttpRequest,e.open(RTC.DELETE,t,!0),e}}).call(this);
